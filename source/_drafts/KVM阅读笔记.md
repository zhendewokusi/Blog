# 前言

个人笔记

## 概念

虚拟化方式而言，虚拟化有不同类型——分区、完全虚拟化、半虚拟化、混合虚拟化或基于容器的虚拟化。

当今 IT 中的五种不同类型的虚拟化：

- 桌面虚拟化（虚拟桌面基础设施 (VDI)）：许多企业公司都在使用它，并为许多场景提供了巨大的优势，因为用户不依赖于他们用来访问的特定设备他们的桌面系统。他们可以通过手机、平板电脑或计算机进行连接，并且通常可以从任何地方连接到虚拟桌面，就好像他们坐在工作场所并使用硬件计算机一样。优点包括更轻松、集中的管理和监控、更简化的更新工作流程（您可以更新 VDI 解决方案中数百个虚拟机的基础映像，并在维护时间内将其重新链接到数百个虚拟机）、简化的部署流程（无需在台式机、工作站或笔记本电脑上进行更多物理安装，以及集中应用程序管理的可能性），以及更轻松地管理合规性和安全相关选项。
- 服务器虚拟化：当今绝大多数 IT 公司都在使用服务器虚拟化。与物理服务器相比，它提供了服务器虚拟机的良好整合，同时提供了比常规物理服务器更多的其他操作优势——更容易备份、更节能、在服务器之间移动工作负载方面更自由等等。
- 应用程序虚拟化：这通常使用某种流/远程协议技术（例如 Microsoft App-V）或某些解决方案来实现，这些解决方案可以将应用程序打包到可以安装到虚拟机并进行分析以实现一致的设置和交付选项的卷中，例如作为 VMware App Volumes。
- 网络虚拟化（以及更广泛的基于云的概念，称为软件定义网络 (SDN)）：这是一种创建独立于物理网络设备（例如交换机）的虚拟网络的技术。从更大的范围来看，SDN 是网络虚拟化理念的延伸，可以跨越多个站点、位置或数据中心。从SDN的概念来看，整个网络配置都是通过软件完成的，不需要特定的物理网络配置。网络虚拟化的最大优势是您可以轻松管理跨越多个位置的复杂网络，而无需对网络数据路径上的所有物理设备进行大规模的物理网络重新配置。
- 存储虚拟化（以及较新的概念软件定义存储 (SDS)）：这是一种从池化物理存储设备中创建虚拟存储设备的技术，我们可以将其作为单个存储设备进行集中管理。这意味着我们正在创建某种抽象层，它将存储设备的内部功能与计算机、应用程序和其他类型的资源隔离。 SDS 作为其扩展，通过从底层硬件中抽象出控制和管理平面，以及为虚拟机和应用程序提供不同类型的存储资源（块、文件和存储），将存储软件堆栈与其运行的硬件解耦。基于对象的资源）。

如何将虚拟机虚拟化为对象，则有不同类型的虚拟化：
- 分区：这是一种虚拟化，其中 CPU 被分为不同的部分，每个部分作为一个单独的系统运行。这种类型的虚拟化解决方案将服务器隔离为多个分区，每个分区都可以运行单独的操作系统（例如，IBM 逻辑分区 (LPAR)）。
- 完全虚拟化：在完全虚拟化中，虚拟机用于模拟常规硬件，但不知道它已被虚拟化。这样做是出于兼容性原因 - 我们不必修改将在虚拟机中运行的来宾操作系统。为此，我们可以使用基于软件和硬件的方法。
- 基于软件：使用二进制翻译虚拟化敏感指令集的执行，同时使用软件模拟硬件，这会增加开销并影响可扩展性。
- 基于硬件：在与 CPU 的虚拟化功能（AMD-V、Intel VT）连接时，从等式中删除二进制转换，这意味着指令集直接在主机 CPU 上执行。这就是 KVM 所做的事情（以及其他流行的虚拟机管理程序，例如 ESXi、Hyper-V 和 Xen）。
- 半虚拟化：这是一种虚拟化，其中来宾操作系统了解它正在被虚拟化，并且需要对其及其驱动程序进行修改，以便它可以在虚拟化解决方案之上运行。同时，它不需要CPU虚拟化扩展就能够运行虚拟机。例如，Xen 可以作为半虚拟化解决方案。
- 混合虚拟化：这是一种利用全虚拟化和半虚拟化最大优点的虚拟化，即来宾操作系统可以不经修改（完全）运行，并且我们可以将额外的半虚拟化驱动程序插入到虚拟机中以与某些虚拟机一起工作。虚拟机工作的特定方面（最常见的是 I/O 密集型内存工作负载）。 Xen和ESXi也可以在混合虚拟化模式下工作。
- 基于容器的虚拟化：这是一种使用容器的应用程序虚拟化。容器是一个打包应用程序及其所有依赖项的对象，以便应用程序可以横向扩展并快速部署，而无需虚拟机或虚拟机管理程序。请记住，有些技术可以同时作为虚拟机管理程序和容器主机运行。此类技术的一些示例包括 Docker。

### 类型 1 和类型 2 虚拟机管理程序

[type1](../image/type1_hypervisors.png)

类型1的优势：

- 安装和配置方便
- 体积小；优化以将大部分物理资源提供给托管来宾（虚拟机）
- 产生的开销更少，因为它仅附带运行虚拟机所需的应用程序
- 更安全，因为一个来宾系统中的问题不会影响虚拟机管理程序上运行的其他来宾系统

缺点：不支持定制，安装第三方应用或者驱动会受到限制。

[type2](../image/type2_hypervisors.png)

2 类虚拟机管理程序驻留在操作系统之上，允许您进行大量自定义。 2 类虚拟机管理程序也称为托管虚拟机管理程序，其操作依赖于主机操作系统。 2 类虚拟机管理程序的主要优点是广泛的硬件支持，因为底层主机操作系统控制硬件访问。



